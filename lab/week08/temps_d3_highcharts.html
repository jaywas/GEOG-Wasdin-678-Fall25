<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>College Station Weekly Temperature Forecast</title>

    <!-- D3 -->
    <script src="https://d3js.org/d3.v4.min.js"></script>

    <!-- Highcharts -->
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/series-label.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>

    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Helvetica, Arial, sans-serif;
        margin: 20px;
      }

      h1,
      h2 {
        text-align: center;
      }

      #d3-temp-chart,
      #hc-temp-chart {
        max-width: 800px;
        margin: 30px auto;
      }

      /* D3 SVG container */
      #d3-temp-chart svg {
        border: 1px solid #ccc;
      }
    </style>
  </head>

  <body>
    <h1>College Station Weekly Temperature Forecast</h1>

    <h2>D3.js Line Chart</h2>
    <div id="d3-temp-chart"></div>

    <h2>Highcharts Line Chart</h2>
    <div id="hc-temp-chart"></div>

    <script>
      // -----------------------------
      // Shared data
      // -----------------------------
      var tempData = [
        { day: "Sat", high: 82, low: 67 },
        { day: "Sun", high: 81, low: 59 },
        { day: "Mon", high: 81, low: 50 },
        { day: "Tue", high: 70, low: 47 },
        { day: "Wed", high: 77, low: 51 },
        { day: "Thu", high: 78, low: 60 },
        { day: "Fri", high: 79, low: 66 },
        { day: "Sat", high: 80, low: 66 },
      ];

      // ==========================================
      // D3.js Line Chart
      // ==========================================
      (function () {
        var margin = { top: 20, right: 80, bottom: 40, left: 50 },
          width = 800 - margin.left - margin.right,
          height = 400 - margin.top - margin.bottom;

        var svg = d3
          .select("#d3-temp-chart")
          .append("svg")
          .attr("width", width + margin.left + margin.right)
          .attr("height", height + margin.top + margin.bottom)
          .append("g")
          .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        // x scale – use day names
        var x = d3
          .scalePoint()
          .domain(tempData.map(function (d) { return d.day; }))
          .range([0, width])
          .padding(0.5);

        // y scale – based on min low and max high
        var y = d3
          .scaleLinear()
          .domain([
            d3.min(tempData, function (d) { return d.low; }) - 5,
            d3.max(tempData, function (d) { return d.high; }) + 5,
          ])
          .range([height, 0]);

        var xAxis = d3.axisBottom(x);
        var yAxis = d3.axisLeft(y);

        // Line generators
        var lineHigh = d3
          .line()
          .x(function (d) { return x(d.day); })
          .y(function (d) { return y(d.high); });

        var lineLow = d3
          .line()
          .x(function (d) { return x(d.day); })
          .y(function (d) { return y(d.low); });

        // Axes
        svg
          .append("g")
          .attr("transform", "translate(0," + height + ")")
          .call(xAxis);

        svg.append("g").call(yAxis);

        // Axis labels
        svg
          .append("text")
          .attr("transform", "translate(" + width / 2 + "," + (height + 30) + ")")
          .style("text-anchor", "middle")
          .text("Day");

        svg
          .append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", -40)
          .attr("x", -height / 2)
          .style("text-anchor", "middle")
          .text("Temperature (°F)");

        // High temp line
        svg
          .append("path")
          .datum(tempData)
          .attr("fill", "none")
          .attr("stroke", "steelblue")
          .attr("stroke-width", 2)
          .attr("d", lineHigh);

        // Low temp line
        svg
          .append("path")
          .datum(tempData)
          .attr("fill", "none")
          .attr("stroke", "tomato")
          .attr("stroke-width", 2)
          .attr("d", lineLow);

        // Simple legend
        var legend = svg.append("g").attr("transform", "translate(" + (width - 120) + ",10)");

        legend
          .append("rect")
          .attr("width", 120)
          .attr("height", 40)
          .attr("fill", "white")
          .attr("stroke", "#ccc");

        legend
          .append("line")
          .attr("x1", 10)
          .attr("y1", 13)
          .attr("x2", 30)
          .attr("y2", 13)
          .attr("stroke", "steelblue")
          .attr("stroke-width", 2);

        legend
          .append("text")
          .attr("x", 35)
          .attr("y", 16)
          .text("High");

        legend
          .append("line")
          .attr("x1", 10)
          .attr("y1", 27)
          .attr("x2", 30)
          .attr("y2", 27)
          .attr("stroke", "tomato")
          .attr("stroke-width", 2);

        legend
          .append("text")
          .attr("x", 35)
          .attr("y", 30)
          .text("Low");
      })();

      // ==========================================
      // Highcharts Line Chart
      // ==========================================
      (function () {
        Highcharts.chart("hc-temp-chart", {
          chart: {
            type: "line",
          },
          title: {
            text: "College Station Weekly Temperature Forecast",
          },
          xAxis: {
            categories: tempData.map(function (d) { return d.day; }),
          },
          yAxis: {
            title: { text: "Temperature (°F)" },
          },
          legend: {
            layout: "vertical",
            align: "right",
            verticalAlign: "middle",
          },
          series: [
            {
              name: "High",
              data: tempData.map(function (d) { return d.high; }),
            },
            {
              name: "Low",
              data: tempData.map(function (d) { return d.low; }),
            },
          ],
          responsive: {
            rules: [
              {
                condition: {
                  maxWidth: 500,
                },
                chartOptions: {
                  legend: {
                    layout: "horizontal",
                    align: "center",
                    verticalAlign: "bottom",
                  },
                },
              },
            ],
          },
        });
      })();
    </script>
  </body>
</html>
